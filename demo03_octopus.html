<!DOCTYPE html>
<html>
<head>
		<title>鱿鱼编辑器</title>
		
		<!-- 使用非压缩 -->
		<script src="blockly_uncompressed.js"></script>
		<script src="blocks/colour.js"></script>
		<script src="blocks/lists.js"></script>
		<script src="blocks/logic.js"></script>
		<script src="blocks/loops.js"></script>
		<script src="blocks/math.js"></script>
		<script src="blocks/procedures.js"></script>
		<script src="blocks/text.js"></script>
		<script src="blocks/variables.js"></script>
		<script src="blocks/variables_dynamic.js"></script>
		<script src="msg/blocks-msg/js/en.js"></script>
		
		<!-- 导入自己的积木 -->
		<script src="blocks/myblocks.js"></script> 
		<script src="generators/javascript/mygenerators.js"></script>
		
		
		<!-- 导入基础模块的generators -->
		<script src="generators/javascript.js"></script>
		<script src="generators/javascript/colour.js"></script>
		<script src="generators/javascript/lists.js"></script>
		<script src="generators/javascript/logic.js"></script>
		<script src="generators/javascript/loops.js"></script>
		<script src="generators/javascript/math.js"></script>
		<script src="generators/javascript/procedures.js"></script>
		<script src="generators/javascript/text.js"></script>
		<script src="generators/javascript/variables.js"></script>
		<script src="generators/javascript/variables_dynamic.js"></script> 
		<link rel="stylesheet" href="css/demo02_octopus.css" type="text/css">

</head>


<body>
<header></header>
<section>
	<div class="left_show">
		<div class="pic">
			<div id="dan" >角色在这里</div>	



		</div>
		<div class="control_panel">
			<button>重新启动</button>
			<button onclick="showCode()">展示代码</button>
			<button style="float: right;" onclick="runCode()">开始运行</button>
		</div>
	</div>
	<div class="right_code_area">
			<div class="blockly">
				<div id="blocklyDiv" style="width:100%;height:100%"></div>
				<!-- 侧边栏积木箱，这些积木箱定义在blocks_compressed.js中 -->
				  <xml id="toolbox" style="display: none">
					<!-- <category name="my blocks"> -->
							<block type="walk_left"></block>
							<block type="walk_right"></block>
							<block type="walk_up"></block>
							<block type="walk_down"></block>
							<block type="walk_jump"></block>
							<block type="walk_repeat"></block>
							
							<!-- <block type="controls_repeat_modify"></block> -->
							<!-- <block type="walk_right"></block> -->
					<!-- </category> -->
				  </xml>

			
			</div>
	</div>
</section>
<footer>
	
</footer>


<script type="text/javascript">
	var demoWorkspace = Blockly.inject('blocklyDiv',
		{ media: 'media/',
		  toolbox: document.getElementById('toolbox')}
	);
	
	 //调整工作区域大小
	var onresize = function (e) {
		Blockly.svgResize(demoWorkspace);
	};
	
	//注册resize处理函数
	window.addEventListener('resize', onresize);
	Blockly.svgResize(demoWorkspace);
	
	function runCode() {
	      // Generate JavaScript code and run it.
	      window.LoopTrap = 1000;
	      Blockly.JavaScript.INFINITE_LOOP_TRAP =
	          'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
	      var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
	      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
	      console.log("run code");
	      try {
	        eval(code);
	      } catch (e) {
	        alert(e);
	      }
	    }
	function showCode() {
	      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
	      var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
	      console.log(code);
	    }
</script>
</body>
</html>

